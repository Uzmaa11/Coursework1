<html>
<head>
    <title>After School Activities</title>
    <script src="https://unpkg.com/vue"></script>
    <script src="lessons.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
</head>
<body >
    <div id="app"> 
            <header style="background-color:rgb(0, 0, 0);font-family:monospace;height:100px">
                    <img style="height:90px;display: flex;"src="header1.png"><br>
                    <img style="height:50px;display:flex;margin-left:110px;margin-top:-80px;"src="header.png">
                    <button style="margin-left:980px;margin-top:-50px;visibility: hidden;height:50px;border:4px solid white;border-radius:20px;width:200px;background-color:rgb(163, 156, 154);color:rgb(0, 0, 0);" id="cartbtn" v-on:click='showCheckout'>
                        {{cartItemCount}}
                        <span class="fas fa-cart-plus"></span>    Shopping Cart
                    </button>
                </header>

        <main>
            <div v-if='showlesson'>
                   
                <div class="card" v-for="lessons in Sort">
                   <h2 style="margin-left: 30px;font-family: Brush script MT;font-size:30px;color:rgb(0, 0, 0);" v-text="lessons.subject"></h2>
                    <figure>
                        <img  style="width: 300px;height:300px;margin-left:-20px;" v-bind:src="lessons.image">
                    </figure>
                    <p style="margin-left: 30px;color:rgb(0, 0, 0);">Location: {{lessons.location}}</p>
                    <p style="margin-left: 30px;color:rgb(0, 0, 0);">Price: {{lessons.price}}</p>
                    <p style="margin-left: 30px;color:rgb(0, 0, 0);">Available spaces: {{lessons.availableInventory -cartCount(lessons) }}</p>
                </div>   
            </div>
            <div v-else>                                        
                <div   v-if='showlesson'>
                    <div v-for="lessons in Sort">
                        <h2 id="lessonSubject" v-text="lessons.subject"></h2>
                        <figure>
                            <img v-bind:src="lessons.image">
                        </figure>
                        <p v-html="lessons.location"></p>
                        <p>Price: {{lessons.price}}</p>
                    </div>
            </div>
        </main>
    </div>
    
    <script type="text/javascript">

        var webstore = new Vue({
            el: '#app',
            data: {
                sitename: 'AFTER SCHOOL ACTIVITIES',
                lessons: lessons,
                cart: [],
                sortItem:{
                    sortCategory:'Subject',
                    sortOrder:'Ascending',
                },
                showlesson: true,
                order: {
                    Name: '',
                    Phone: '',
               
                },
               
                
            },
         
            methods: {
            

                showCheckout() {
                    if (  this.showlesson = this.showlesson ? false : true)
                    document.getElementById("sortButtons").style.display='contents';
                    else 
                    document.getElementById("sortButtons").style.display='none';
                    document.getElementById("chkout").style.display='contents';

                    
                },
              
                canAddToCart(lessons) {
                    return lessons.availableInventory > this.cartCount(lessons);
                },
                cartCount(id) {
                    let count = 0;
                    for (let i = 0; i < this.cart.length; i++) {
                        if (this.cart[i] === id) {
                            count++;
                        }
                    }
                    return count;
                },
            },
            computed: {
                cartItemCount() {
                    return this.cart.length;
                },


            Sort() {
                
                let lessonsArray = this.lessons.slice(0);

                let sortC=this.sortItem.sortCategory;
                let sortO=this.sortItem.sortOrder;

                console.log(sortC);
                console.log(sortO); 
                
                if ((sortC=="Subject")&&(sortO=="Descending")){
                    
                    function compare(a, b) {
                        if (a.subject > b.subject)
                            return -1;
                        if (a.subject < b.subject)
                            return 1;
                        return 0;
                    }
                    return lessonsArray.sort(compare);
                }
                 else if ((sortC=="Location")&&(sortO=="Ascending")){
                    function compare(a, b) {
                        if (a.location > b.location)
                            return 1;
                        if (a.location < b.location)
                            return -1;
                        return 0;
                    }
                    return lessonsArray.sort(compare);
                }
                else if ((sortC=="Location")&&(sortO=="Descending")){
                    function compare(a, b) {
                        if (a.location > b.location)
                            return -1;
                        if (a.location < b.location)
                            return 1;
                        return 0;
                    }
                    return lessonsArray.sort(compare);
                }
                else if ((sortC=="Price")&&(sortO=="Ascending")){
                    function compare(a, b) {
                        if (a.price > b.price)
                            return 1;
                        if (a.price < b.price)
                            return -1;
                        return 0;
                    }
                    return lessonsArray.sort(compare);
                }
                else if ((sortC=="Price")&&(sortO=="Descending")){
                    function compare(a, b) {
                        if (a.price > b.price)
                            return -1;
                        if (a.price < b.price)
                            return 1;
                        return 0;
                    }
                    return lessonsArray.sort(compare);
                }
                else if ((sortC=="Subject")&&(sortO=="Ascending")){
                    function compare(a, b) {
                        if (a.subject > b.subject)
                            return 1;
                        if (a.subject < b.subject)
                            return -1;
                        return 0;
                    }
                    return lessonsArray.sort(compare);
                }              
                               
            },
        }
    });
    </script>
</body>

</html>